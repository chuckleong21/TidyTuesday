<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2019033-emperors</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="2019034-nuclear bomb_files/libs/clipboard/clipboard.min.js"></script>
<script src="2019034-nuclear bomb_files/libs/quarto-html/quarto.js"></script>
<script src="2019034-nuclear bomb_files/libs/quarto-html/popper.min.js"></script>
<script src="2019034-nuclear bomb_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="2019034-nuclear bomb_files/libs/quarto-html/anchor.min.js"></script>
<link href="2019034-nuclear bomb_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2019034-nuclear bomb_files/libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="2019034-nuclear bomb_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="2019034-nuclear bomb_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="2019034-nuclear bomb_files/libs/bootstrap/bootstrap-8a79a254b8e706d3c925cde0a310d4f0.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="2019034-nuclear bomb_files/libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="2019034-nuclear bomb_files/libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="2019034-nuclear bomb_files/libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script src="2019034-nuclear bomb_files/libs/quarto-diagram/mermaid.min.js"></script>
<script src="2019034-nuclear bomb_files/libs/quarto-diagram/mermaid-init.js"></script>
<link href="2019034-nuclear bomb_files/libs/quarto-diagram/mermaid.css" rel="stylesheet">
<link href="2019034-nuclear bomb_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="2019034-nuclear bomb_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="2019034-nuclear bomb_files/libs/jquery-3.5.1/jquery.min.js"></script>

<script src="2019034-nuclear bomb_files/libs/proj4js-2.3.15/proj4.js"></script>

<link href="2019034-nuclear bomb_files/libs/highcharts-9.3.1/css/motion.css" rel="stylesheet">

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/highcharts.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/highcharts-3d.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/highcharts-more.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/stock.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/map.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/data.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/exporting.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/offline-exporting.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/drilldown.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/item-series.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/overlapping-datalabels.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/annotations.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/export-data.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/funnel.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/heatmap.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/treemap.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/sankey.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/dependency-wheel.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/organization.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/solid-gauge.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/streamgraph.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/sunburst.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/vector.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/wordcloud.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/xrange.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/tilemap.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/venn.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/gantt.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/timeline.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/parallel-coordinates.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/bullet.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/coloraxis.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/dumbbell.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/lollipop.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/series-label.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/plugins/motion.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/custom/reset.js"></script>

<script src="2019034-nuclear bomb_files/libs/highcharts-9.3.1/modules/boost.js"></script>

<script src="2019034-nuclear bomb_files/libs/highchart-binding-0.9.4/highchart.js"></script>



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#nuclear-bomb-detonations-for-weapon-development" id="toc-nuclear-bomb-detonations-for-weapon-development" class="nav-link active" data-scroll-target="#nuclear-bomb-detonations-for-weapon-development">Nuclear bomb detonations for weapon development</a></li>
  <li><a href="#nuclear-bomb-detonations-over-the-years-among-countries" id="toc-nuclear-bomb-detonations-over-the-years-among-countries" class="nav-link" data-scroll-target="#nuclear-bomb-detonations-over-the-years-among-countries">Nuclear bomb detonations over the years among countries</a>
  <ul class="collapse">
  <li><a href="#creating-custom-color-palette" id="toc-creating-custom-color-palette" class="nav-link" data-scroll-target="#creating-custom-color-palette">Creating custom color palette</a></li>
  <li><a href="#prepare-data" id="toc-prepare-data" class="nav-link" data-scroll-target="#prepare-data">Prepare Data</a></li>
  <li><a href="#first-barplot" id="toc-first-barplot" class="nav-link" data-scroll-target="#first-barplot">First Barplot</a></li>
  <li><a href="#decorations-annotations" id="toc-decorations-annotations" class="nav-link" data-scroll-target="#decorations-annotations">Decorations &amp; Annotations</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2019033-emperors</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Story
</div>
</div>
<div class="callout-body-container callout-body">
<p>The 7 countries started a nuclear development race since the world had witnessed the power of nuclear bombs used in the World War Ⅱ. There were 2050 detonations before the last one on record in 1998. It is no surprise that most of these detonations applied or tested for weaponry. Below we will find out the exact number of detonations for this particular purpose, as well as the changes in the number of detonations over the years and the power of these detonations in numbers.</p>
</div>
</div>
<section id="nuclear-bomb-detonations-for-weapon-development" class="level1">
<h1>Nuclear bomb detonations for weapon development</h1>
<p>We will start our analysis with a packed bubble chart to see the number of detonations for weapon development in each countries.</p>
<p>`highcharter` is a R library that uses the <a href="https://api.highcharts.com/highcharts/">highcharstJS API</a>. It may seem complex at first glance as Javascript heavily uses nested lists like JSON, but it offers interactivity. Here is a simple comparison between JS and R:</p>
<div class="columns">
<div class="column" style="width:45%;">
<section id="javascript" class="level3">
<h3 class="anchored" data-anchor-id="javascript">Javascript</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>Highchart<span class="op">.</span><span class="fu">chart</span>(<span class="st">'container'</span><span class="op">,</span> {</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>        <span class="dt">chart</span><span class="op">:</span> {</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>                <span class="dt">type</span><span class="op">:</span> <span class="st">'packedbubble'</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<script>
Highchart.chart('container', {
        chart: {
                type: 'packedbubble'
        }
})

</script>
</div>
</section>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<section id="r" class="level3">
<h3 class="anchored" data-anchor-id="r">R</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hchart</span>(<span class="at">type =</span> <span class="st">"packedbubble"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-1-1"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a>nuclear_explosions <span class="ot">&lt;-</span> nuclear_explosions <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-1-2"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(purpose)) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-1-3"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="annotated-cell-1-4"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a>                <span class="co">#! country color are coerced into alphabetical orders </span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-5" class="code-annotation-target"><a href="#annotated-cell-1-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">country =</span> <span class="fu">case_when</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-6" class="code-annotation-target"><a href="#annotated-cell-1-6" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"CHINA"</span>  <span class="sc">~</span> <span class="st">"China"</span>,</span>
<span id="annotated-cell-1-7"><a href="#annotated-cell-1-7" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"FRANCE"</span> <span class="sc">~</span> <span class="st">"France"</span>,</span>
<span id="annotated-cell-1-8"><a href="#annotated-cell-1-8" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"INDIA"</span>  <span class="sc">~</span> <span class="st">"India"</span>,</span>
<span id="annotated-cell-1-9"><a href="#annotated-cell-1-9" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"PAKIST"</span> <span class="sc">~</span> <span class="st">"Pakistan"</span>,</span>
<span id="annotated-cell-1-10"><a href="#annotated-cell-1-10" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"UK"</span>     <span class="sc">~</span> <span class="st">"United Kingdom"</span>,</span>
<span id="annotated-cell-1-11"><a href="#annotated-cell-1-11" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"USA"</span>    <span class="sc">~</span> <span class="st">"United States of America"</span>,</span>
<span id="annotated-cell-1-12"><a href="#annotated-cell-1-12" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"USSR"</span>   <span class="sc">~</span> <span class="st">"Soviet Union"</span>,</span>
<span id="annotated-cell-1-13"><a href="#annotated-cell-1-13" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="annotated-cell-1-14"><a href="#annotated-cell-1-14" aria-hidden="true" tabindex="-1"></a>        )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="5,13" data-code-annotation="1">Recode the country names as they affect how they will be displayed on our chart.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="6,7,8,9,10,11,12" data-code-annotation="2">The display order is in alphabetical for the legend by default. I have not yet figured out how to customize it in <code>highcharter</code>.</span>
</dd>
</dl>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a>nuclear_explosions_pb <span class="ot">&lt;-</span> nuclear_explosions <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">purpose =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(purpose, <span class="st">"WR"</span>), <span class="st">"WR"</span>, purpose)) <span class="sc">%&gt;%</span>  </span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">count</span>(country, purpose) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="annotated-cell-2-5"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a>                <span class="co">#! this only changes the colors of the inner bubbles</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3">3</button><span id="annotated-cell-2-6" class="code-annotation-target"><a href="#annotated-cell-2-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">color =</span> <span class="fu">case_when</span>(</span>
<span id="annotated-cell-2-7"><a href="#annotated-cell-2-7" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"China"</span>                   <span class="sc">~</span> <span class="st">"#3cb589"</span>,</span>
<span id="annotated-cell-2-8"><a href="#annotated-cell-2-8" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"France"</span>                  <span class="sc">~</span> <span class="st">"#62c237"</span>,</span>
<span id="annotated-cell-2-9"><a href="#annotated-cell-2-9" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"India"</span>                   <span class="sc">~</span> <span class="st">"#19C9AA"</span>,</span>
<span id="annotated-cell-2-10"><a href="#annotated-cell-2-10" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"Pakistan"</span>                <span class="sc">~</span> <span class="st">"#276c99"</span>,</span>
<span id="annotated-cell-2-11"><a href="#annotated-cell-2-11" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"Soviet Union"</span>            <span class="sc">~</span> <span class="st">"#7717bd"</span>,</span>
<span id="annotated-cell-2-12"><a href="#annotated-cell-2-12" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"United Kingdom"</span>          <span class="sc">~</span> <span class="st">"#90ca20"</span>,</span>
<span id="annotated-cell-2-13"><a href="#annotated-cell-2-13" aria-hidden="true" tabindex="-1"></a>                        country <span class="sc">==</span> <span class="st">"United States of America"</span><span class="sc">~</span> <span class="st">"#c5cc44"</span></span>
<span id="annotated-cell-2-14"><a href="#annotated-cell-2-14" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="annotated-cell-2-15"><a href="#annotated-cell-2-15" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span></span>
<span id="annotated-cell-2-16"><a href="#annotated-cell-2-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">arrange</span>(<span class="fu">desc</span>(purpose))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="6,7,8,9,10,11,12,13,14" data-code-annotation="3">Assign colors to inner bubbles, they will also be applied in the legend.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Bubble colors
</div>
</div>
<div class="callout-body-container callout-body">
<p>There are two types color sequence: colors of <strong>inner bubbles</strong> and colors of <strong>outer bubbles</strong>. The outer bubble is a larger bubble that encapsulates all the other smaller bubbles, thus the inner bubbles.</p>
<p>By default, <strong>darker colors</strong> of the same hue are applied to <strong>inner bubbles</strong> as well as in the <strong>legend</strong>, while lighter colors are applied to outer bubbles.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-3"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-3-1"><a href="#annotated-cell-3-1" aria-hidden="true" tabindex="-1"></a>packed_bubble_outer_col <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"#4BE3AC"</span>, <span class="st">"#7BF345"</span>, <span class="st">"#19C9AA"</span>, <span class="st">"#3187C0"</span>, <span class="st">"#951DED"</span>, <span class="st">"#B5FD29"</span>, <span class="st">"#F7FF56"</span>)</span>
<span id="annotated-cell-3-2"><a href="#annotated-cell-3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-3-3"><a href="#annotated-cell-3-3" aria-hidden="true" tabindex="-1"></a>hc_theme_radioactive <span class="ot">&lt;-</span> <span class="fu">hc_theme_merge</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="5">5</button><span id="annotated-cell-3-4" class="code-annotation-target"><a href="#annotated-cell-3-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_theme_null</span>(),</span>
<span id="annotated-cell-3-5"><a href="#annotated-cell-3-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_theme</span>(</span>
<span id="annotated-cell-3-6"><a href="#annotated-cell-3-6" aria-hidden="true" tabindex="-1"></a>                <span class="co">#! this change the colors of the outer bubbles</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-3" data-target-annotation="4">4</button><span id="annotated-cell-3-7" class="code-annotation-target"><a href="#annotated-cell-3-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">colors =</span> packed_bubble_outer_col,</span>
<span id="annotated-cell-3-8"><a href="#annotated-cell-3-8" aria-hidden="true" tabindex="-1"></a>                <span class="at">chart =</span> <span class="fu">list</span>(<span class="at">backgroundColor =</span> <span class="st">"#000000"</span>), </span>
<span id="annotated-cell-3-9"><a href="#annotated-cell-3-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">title =</span> <span class="fu">list</span>(<span class="at">style =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"white"</span>)), </span>
<span id="annotated-cell-3-10"><a href="#annotated-cell-3-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">subtitle =</span> <span class="fu">list</span>(<span class="at">style =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"white"</span>)), </span>
<span id="annotated-cell-3-11"><a href="#annotated-cell-3-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend =</span> <span class="fu">list</span>(<span class="at">itemStyle =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"grey"</span>), <span class="at">itemHoverStyle =</span> <span class="fu">list</span>(<span class="at">color =</span> <span class="st">"white"</span>))</span>
<span id="annotated-cell-3-12"><a href="#annotated-cell-3-12" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-3-13"><a href="#annotated-cell-3-13" aria-hidden="true" tabindex="-1"></a>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-3" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="7" data-code-annotation="4">The outer bubble colors are set in the `hc_theme()` and doesn’t impact the inner bubble colors.</span>
</dd>
<dt data-target-cell="annotated-cell-3" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-3" data-code-lines="4" data-code-annotation="5">It is best to initiate a null theme `hc_theme_null()` (the equivalent `theme_grey()` in ggplot2 syntax) before customizing your theme.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Plot Options
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remember that you can always refer to the <a href="https://api.highcharts.com/highcharts/plotOptions.packedbubble">documentation</a> to explore what Hightcharts has to offer. Things to note when you convert JS code to R code:</p>
<ul>
<li><p>Every object is converted to a list in R. Consider the following example:</p>
<div class="columns">
<div class="column" style="width:45%;">
<h3 id="js" class="anchored">JS</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plotOptions<span class="op">:</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>        <span class="dt">packedbubble</span><span class="op">:</span> {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>                <span class="dt">minSize</span><span class="op">:</span> <span class="st">"20%"</span><span class="op">,</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>                <span class="dt">maxSize</span><span class="op">:</span> <span class="st">"100%"</span><span class="op">,</span> </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>                <span class="dt">zMin</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                <span class="dt">zMax</span><span class="op">:</span> <span class="dv">1000</span><span class="op">,</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                <span class="dt">layoutAlgorithm</span><span class="op">:</span> {</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">gravitationalConstant</span><span class="op">:</span> <span class="fl">0.05</span><span class="op">,</span> </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">splitSeries</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> </span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">seriesInteraction</span><span class="op">:</span> <span class="kw">false</span><span class="op">,</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">dragBetweenSeries</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> </span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">parentNodeLimit</span><span class="op">:</span> <span class="kw">true</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                }<span class="op">,</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>                <span class="dt">dataLabels</span><span class="op">:</span> {</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">enabled</span><span class="op">:</span> <span class="kw">true</span><span class="op">,</span> </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">format</span><span class="op">:</span> <span class="st">'{pont.name}'</span><span class="op">,</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>                        <span class="dt">filter</span><span class="op">:</span> {</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>                                <span class="dt">property</span><span class="op">:</span> <span class="st">'y'</span><span class="op">,</span> </span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>                                <span class="dt">operator</span><span class="op">:</span> <span class="st">'&gt;'</span><span class="op">,</span> </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>                                <span class="dt">value</span><span class="op">:</span> <span class="dv">250</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>                        }</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>                }</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<script>
plotOptions: {
        packedbubble: {
                minSize: "20%", 
                maxSize: "100%", 
                zMin: 0, 
                zMax: 1000,
                layoutAlgorithm: {
                        gravitationalConstant: 0.05, 
                        splitSeries: true, 
                        seriesInteraction: false, 
                        dragBetweenSeries: true, 
                        parentNodeLimit: true
                },
                dataLabels: {
                        enabled: true, 
                        format: '{pont.name}', 
                        filter: {
                                property: 'y', 
                                operator: '>', 
                                value: 250
                        }
                }
        }
}
</script>
</div>
</div><div class="column" style="width:5%;">

</div><div class="column" style="width:45%;">
<h3 id="r-1" class="anchored">R</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hc_plotOptions</span>(</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>        <span class="at">packedbubble =</span> <span class="fu">list</span>(</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">minSize =</span> <span class="st">"20%"</span>, </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">maxSize =</span> <span class="st">"100%"</span>, </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">zMin =</span> <span class="dv">0</span>, </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">zMax =</span> <span class="dv">1000</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">layoutAlgorithm =</span> <span class="fu">list</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">gravitationalConstant =</span> <span class="fl">0.05</span>, </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">splitSeries =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">seriesInteraction =</span> <span class="cn">FALSE</span>, </span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">dragBetweenSeries =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">parentNodeLimit =</span> <span class="cn">TRUE</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                ), </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">dataLabels =</span> <span class="fu">list</span>(</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">enabled =</span> <span class="cn">TRUE</span>, </span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">format =</span> <span class="st">"{point.name}"</span>, </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">filter =</span> <span class="fu">list</span>(</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>                                <span class="at">property =</span> <span class="st">"y"</span>, </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>                                <span class="at">operator =</span> <span class="st">"&gt;"</span>, </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>                                <span class="at">value =</span> <span class="dv">250</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div></li>
</ul>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-4"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-4-1"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a>hc_packedbubble <span class="ot">&lt;-</span> nuclear_explosions_pb <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-4-2"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hchart</span>(</span>
<span id="annotated-cell-4-3"><a href="#annotated-cell-4-3" aria-hidden="true" tabindex="-1"></a>                <span class="co"># declare chart type</span></span>
<span id="annotated-cell-4-4"><a href="#annotated-cell-4-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="st">"packedbubble"</span>, </span>
<span id="annotated-cell-4-5"><a href="#annotated-cell-4-5" aria-hidden="true" tabindex="-1"></a>                <span class="co"># aesthestic arguments take directly from that in highcharterJS</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="7">7</button><span id="annotated-cell-4-6" class="code-annotation-target"><a href="#annotated-cell-4-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">hcaes</span>(</span>
<span id="annotated-cell-4-7"><a href="#annotated-cell-4-7" aria-hidden="true" tabindex="-1"></a>                        <span class="at">name =</span> purpose,</span>
<span id="annotated-cell-4-8"><a href="#annotated-cell-4-8" aria-hidden="true" tabindex="-1"></a>                        <span class="at">value =</span> n,</span>
<span id="annotated-cell-4-9"><a href="#annotated-cell-4-9" aria-hidden="true" tabindex="-1"></a>                        <span class="at">group =</span> country,</span>
<span id="annotated-cell-4-10"><a href="#annotated-cell-4-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">color =</span> color</span>
<span id="annotated-cell-4-11"><a href="#annotated-cell-4-11" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="annotated-cell-4-12"><a href="#annotated-cell-4-12" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-4-13"><a href="#annotated-cell-4-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_plotOptions</span>(</span>
<span id="annotated-cell-4-14"><a href="#annotated-cell-4-14" aria-hidden="true" tabindex="-1"></a>                <span class="at">packedbubble =</span> <span class="fu">list</span>(</span>
<span id="annotated-cell-4-15"><a href="#annotated-cell-4-15" aria-hidden="true" tabindex="-1"></a>                        <span class="at">minSize =</span> <span class="st">"20%"</span>,</span>
<span id="annotated-cell-4-16"><a href="#annotated-cell-4-16" aria-hidden="true" tabindex="-1"></a>                        <span class="at">maxsize =</span> <span class="st">"100%"</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="8">8</button><span id="annotated-cell-4-17" class="code-annotation-target"><a href="#annotated-cell-4-17" aria-hidden="true" tabindex="-1"></a>                        <span class="at">zMin =</span> <span class="dv">0</span>,</span>
<span id="annotated-cell-4-18"><a href="#annotated-cell-4-18" aria-hidden="true" tabindex="-1"></a>                        <span class="at">layoutAlgorithm =</span> <span class="fu">list</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="9">9</button><span id="annotated-cell-4-19" class="code-annotation-target"><a href="#annotated-cell-4-19" aria-hidden="true" tabindex="-1"></a>                                <span class="at">gravitationalConstant =</span> <span class="fl">0.05</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="10">10</button><span id="annotated-cell-4-20" class="code-annotation-target"><a href="#annotated-cell-4-20" aria-hidden="true" tabindex="-1"></a>                                <span class="at">splitSeries =</span>  <span class="cn">TRUE</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="11">11</button><span id="annotated-cell-4-21" class="code-annotation-target"><a href="#annotated-cell-4-21" aria-hidden="true" tabindex="-1"></a>                                <span class="at">seriesInteraction =</span> <span class="cn">FALSE</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="12">12</button><span id="annotated-cell-4-22" class="code-annotation-target"><a href="#annotated-cell-4-22" aria-hidden="true" tabindex="-1"></a>                                <span class="at">dragBetweenSeries =</span> <span class="cn">FALSE</span>,</span>
<span id="annotated-cell-4-23"><a href="#annotated-cell-4-23" aria-hidden="true" tabindex="-1"></a>                                <span class="at">parentNodeLimit =</span> <span class="cn">FALSE</span></span>
<span id="annotated-cell-4-24"><a href="#annotated-cell-4-24" aria-hidden="true" tabindex="-1"></a>                        ), </span>
<span id="annotated-cell-4-25"><a href="#annotated-cell-4-25" aria-hidden="true" tabindex="-1"></a>                        <span class="at">dataLabels =</span> <span class="fu">list</span>(</span>
<span id="annotated-cell-4-26"><a href="#annotated-cell-4-26" aria-hidden="true" tabindex="-1"></a>                                <span class="at">enabled =</span> <span class="cn">TRUE</span>,</span>
<span id="annotated-cell-4-27"><a href="#annotated-cell-4-27" aria-hidden="true" tabindex="-1"></a>                                <span class="at">format =</span> <span class="st">'{point.name}'</span>, </span>
<span id="annotated-cell-4-28"><a href="#annotated-cell-4-28" aria-hidden="true" tabindex="-1"></a>                                <span class="co"># filter `purpose == 'WR'`</span></span>
<span id="annotated-cell-4-29"><a href="#annotated-cell-4-29" aria-hidden="true" tabindex="-1"></a>                                <span class="at">filter =</span> <span class="fu">list</span>(</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="13">13</button><span id="annotated-cell-4-30" class="code-annotation-target"><a href="#annotated-cell-4-30" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">property =</span> <span class="st">'x'</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="14">14</button><span id="annotated-cell-4-31" class="code-annotation-target"><a href="#annotated-cell-4-31" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">operator =</span>  <span class="st">'==='</span>,</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="15">15</button><span id="annotated-cell-4-32" class="code-annotation-target"><a href="#annotated-cell-4-32" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">value =</span> <span class="dv">0</span></span>
<span id="annotated-cell-4-33"><a href="#annotated-cell-4-33" aria-hidden="true" tabindex="-1"></a>                                        ),</span>
<span id="annotated-cell-4-34"><a href="#annotated-cell-4-34" aria-hidden="true" tabindex="-1"></a>                                <span class="at">style =</span> <span class="fu">list</span>(</span>
<span id="annotated-cell-4-35"><a href="#annotated-cell-4-35" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">color =</span> <span class="st">'black'</span>, </span>
<span id="annotated-cell-4-36"><a href="#annotated-cell-4-36" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">textOutline =</span> <span class="st">'none'</span>, </span>
<span id="annotated-cell-4-37"><a href="#annotated-cell-4-37" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">fontWeight =</span> <span class="st">'normal'</span></span>
<span id="annotated-cell-4-38"><a href="#annotated-cell-4-38" aria-hidden="true" tabindex="-1"></a>                                        )</span>
<span id="annotated-cell-4-39"><a href="#annotated-cell-4-39" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="annotated-cell-4-40"><a href="#annotated-cell-4-40" aria-hidden="true" tabindex="-1"></a>                        </span>
<span id="annotated-cell-4-41"><a href="#annotated-cell-4-41" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="annotated-cell-4-42"><a href="#annotated-cell-4-42" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-4-43"><a href="#annotated-cell-4-43" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_title</span>(<span class="at">text =</span> <span class="st">'Distributions in Nuclear Explosions Across the Globe'</span>) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-4-44"><a href="#annotated-cell-4-44" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_subtitle</span>(<span class="at">text =</span> <span class="st">'Between 1945 and 1998, most of the nuclear explosions were for weapon development programmes'</span>) <span class="sc">%&gt;%</span> </span>
<span id="annotated-cell-4-45"><a href="#annotated-cell-4-45" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_tooltip</span>(<span class="at">useHTML =</span> <span class="cn">TRUE</span>, <span class="at">pointFormat =</span> <span class="st">'{point.value} {point.name}'</span>) <span class="sc">%&gt;%</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="6">6</button><span id="annotated-cell-4-46" class="code-annotation-target"><a href="#annotated-cell-4-46" aria-hidden="true" tabindex="-1"></a>        <span class="fu">hc_add_theme</span>(hc_theme_radioactive)</span>
<span id="annotated-cell-4-47"><a href="#annotated-cell-4-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-48"><a href="#annotated-cell-4-48" aria-hidden="true" tabindex="-1"></a>hc_packedbubble</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="46" data-code-annotation="6">Apply custom theme.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="6,7,8,9,10,11" data-code-annotation="7">The common aesthetic parameters <code>hc_aes()</code> accept: <code>x,y</code>, <code>name</code>, <code>value</code>, <code>group</code>, <code>color</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="17" data-code-annotation="8"><code>zMin/zMax</code> values defines the expansion behaviour during the initiated animation frames. They work with <code>bubble</code> series internally to control bubble “sizes”. It would be best to leave it as 0.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="19" data-code-annotation="9">The larger this parameter is, the more wobbly the bubbles are.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="20" data-code-annotation="10">Split bubbles into groups.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="21" data-code-annotation="11">SubItems cannot be dragged into other groups,</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="12">12</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="22" data-code-annotation="12">SubItems are always back to its parent.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="13">13</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="30" data-code-annotation="13">Correspond to <code>name</code> argument in chart definition.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="14">14</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="31" data-code-annotation="14">The <code>==</code> operator in R is expressed as <code>===</code> in JS.</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="15">15</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="32" data-code-annotation="15">Represents the indices of data points in a series. <strong>JS index starts at 0 instead of 1</strong>.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div class="highchart html-widget html-fill-item" id="htmlwidget-fccd68b2a7c192cc023b" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-fccd68b2a7c192cc023b">{"x":{"hc_opts":{"chart":{"reflow":true},"title":{"text":"Distributions in Nuclear Explosions Across the Globe"},"yAxis":{"title":{"text":[]}},"credits":{"enabled":false},"exporting":{"enabled":false},"boost":{"enabled":false},"plotOptions":{"series":{"label":{"enabled":false},"turboThreshold":0,"showInLegend":true},"treemap":{"layoutAlgorithm":"squarified"},"scatter":{"marker":{"symbol":"circle"}},"packedbubble":{"minSize":"20%","maxsize":"100%","zMin":0,"layoutAlgorithm":{"gravitationalConstant":0.05,"splitSeries":true,"seriesInteraction":false,"dragBetweenSeries":false,"parentNodeLimit":false},"dataLabels":{"enabled":true,"format":"{point.name}","filter":{"property":"x","operator":"===","value":0},"style":{"color":"black","textOutline":"none","fontWeight":"normal"}}}},"series":[{"name":"China","data":[{"country":"China","purpose":"WR","n":45,"color":"#3cb589","name":"WR","value":45}],"type":"packedbubble"},{"name":"France","data":[{"country":"France","purpose":"WR","n":193,"color":"#62c237","name":"WR","value":193},{"country":"France","purpose":"WE","n":5,"color":"#62c237","name":"WE","value":5},{"country":"France","purpose":"SE","n":11,"color":"#62c237","name":"SE","value":11}],"type":"packedbubble"},{"name":"India","data":[{"country":"India","purpose":"WR","n":2,"color":"#19C9AA","name":"WR","value":2},{"country":"India","purpose":"PNE","n":1,"color":"#19C9AA","name":"PNE","value":1}],"type":"packedbubble"},{"name":"Pakistan","data":[{"country":"Pakistan","purpose":"WR","n":2,"color":"#276c99","name":"WR","value":2}],"type":"packedbubble"},{"name":"Soviet Union","data":[{"country":"Soviet Union","purpose":"WR","n":443,"color":"#7717bd","name":"WR","value":443},{"country":"Soviet Union","purpose":"WE/SAM","n":3,"color":"#7717bd","name":"WE/SAM","value":3},{"country":"Soviet Union","purpose":"WE","n":56,"color":"#7717bd","name":"WE","value":56},{"country":"Soviet Union","purpose":"SE","n":1,"color":"#7717bd","name":"SE","value":1},{"country":"Soviet Union","purpose":"SAM","n":25,"color":"#7717bd","name":"SAM","value":25},{"country":"Soviet Union","purpose":"PNE","n":152,"color":"#7717bd","name":"PNE","value":152},{"country":"Soviet Union","purpose":"ME","n":1,"color":"#7717bd","name":"ME","value":1},{"country":"Soviet Union","purpose":"FMS","n":33,"color":"#7717bd","name":"FMS","value":33}],"type":"packedbubble"},{"name":"United Kingdom","data":[{"country":"United Kingdom","purpose":"WR","n":41,"color":"#90ca20","name":"WR","value":41},{"country":"United Kingdom","purpose":"WE","n":4,"color":"#90ca20","name":"WE","value":4}],"type":"packedbubble"},{"name":"United States of America","data":[{"country":"United States of America","purpose":"WR","n":812,"color":"#c5cc44","name":"WR","value":812},{"country":"United States of America","purpose":"WE","n":116,"color":"#c5cc44","name":"WE","value":116},{"country":"United States of America","purpose":"TRANSP","n":4,"color":"#c5cc44","name":"TRANSP","value":4},{"country":"United States of America","purpose":"SE","n":59,"color":"#c5cc44","name":"SE","value":59},{"country":"United States of America","purpose":"SB","n":5,"color":"#c5cc44","name":"SB","value":5},{"country":"United States of America","purpose":"PNE:V","n":7,"color":"#c5cc44","name":"PNE:V","value":7},{"country":"United States of America","purpose":"PNE:PLO","n":27,"color":"#c5cc44","name":"PNE:PLO","value":27},{"country":"United States of America","purpose":"COMBAT","n":2,"color":"#c5cc44","name":"COMBAT","value":2}],"type":"packedbubble"}],"xAxis":{"type":null,"title":{"text":[]},"categories":null},"subtitle":{"text":"Between 1945 and 1998, most of the nuclear explosions were for weapon development programmes"},"tooltip":{"useHTML":true,"pointFormat":"{point.value} {point.name}"}},"theme":{"chart":{"backgroundColor":"#000000"},"plotOptions":{"line":{"marker":{"enabled":false}}},"legend":{"enabled":true,"align":"right","verticalAlign":"bottom","itemStyle":{"color":"grey"},"itemHoverStyle":{"color":"white"}},"credits":{"enabled":false},"xAxis":{"visible":false},"yAxis":{"visible":false},"colors":["#4BE3AC","#7BF345","#19C9AA","#3187C0","#951DED","#B5FD29","#F7FF56"],"title":{"style":{"color":"white"}},"subtitle":{"style":{"color":"white"}}},"conf_opts":{"global":{"Date":null,"VMLRadialGradientURL":"http =//code.highcharts.com/list(version)/gfx/vml-radial-gradient.png","canvasToolsURL":"http =//code.highcharts.com/list(version)/modules/canvas-tools.js","getTimezoneOffset":null,"timezoneOffset":0,"useUTC":true},"lang":{"contextButtonTitle":"Chart context menu","decimalPoint":".","downloadCSV":"Download CSV","downloadJPEG":"Download JPEG image","downloadPDF":"Download PDF document","downloadPNG":"Download PNG image","downloadSVG":"Download SVG vector image","downloadXLS":"Download XLS","drillUpText":"◁ Back to {series.name}","exitFullscreen":"Exit from full screen","exportData":{"annotationHeader":"Annotations","categoryDatetimeHeader":"DateTime","categoryHeader":"Category"},"hideData":"Hide data table","invalidDate":null,"loading":"Loading...","months":["January","February","March","April","May","June","July","August","September","October","November","December"],"noData":"No data to display","numericSymbolMagnitude":1000,"numericSymbols":["k","M","G","T","P","E"],"printChart":"Print chart","resetZoom":"Reset zoom","resetZoomTitle":"Reset zoom level 1:1","shortMonths":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"shortWeekdays":["Sat","Sun","Mon","Tue","Wed","Thu","Fri"],"thousandsSep":" ","viewData":"View data table","viewFullscreen":"View in full screen","weekdays":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},"type":"chart","fonts":[],"debug":false},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="nuclear-bomb-detonations-over-the-years-among-countries" class="level1">
<h1>Nuclear bomb detonations over the years among countries</h1>
<p>Next we will turn to the classic barplot for exploring the changes in detonations over the years using the ggplot2 library as we create our very own color palette in a “nuclear” style. We will call them <code>scale_*_radioactive</code> The following flow chart should facilitate process of understanding:</p>
<section id="creating-custom-color-palette" class="level2">
<h2 class="anchored" data-anchor-id="creating-custom-color-palette">Creating custom color palette</h2>
<div class="cell" data-layout-align="default">
<div class="cell-output-display">
<div>
<p></p><figure class="figure"><p></p>
<div>
<pre class="mermaid mermaid-js">flowchart TD
        A[Define a sequence of named colors]:::step1--&gt;|called by|B["`radioactive_cols()`"]:::step1
        B--&gt;C[Assign these colors to named palettes. i.e. main]:::step2
        C--&gt;|called by|F["`radioactive_pal()`"]:::step2
        D["`use colorRampPalette() for color interpolation`"]--&gt;|in|F
        E["`scale_*_radioactive() refers to these palette`"]:::step3--&gt;|referred from|F
        F-.-&gt;|returns|G[a function 
        for interpolation]
        B-.-&gt;|returns|H[defined colors]
        classDef step1 fill:#37a, color:#fff
        classDef step2 fill:#1aa, color:#fff
        classDef step3 fill:#ff1, color:#000
</pre>
</div>
<p></p></figure><p></p>
</div>
</div>
</div>
<p>The code then will be:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-5"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#' Function to extract drsimonj colors as hex codes</span></span>
<span id="annotated-cell-5-2"><a href="#annotated-cell-5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param ... Character names of radioactive_colors </span></span>
<span id="annotated-cell-5-4"><a href="#annotated-cell-5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return character vector of defined color hex codes</span></span>
<span id="annotated-cell-5-5"><a href="#annotated-cell-5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-6"><a href="#annotated-cell-5-6" aria-hidden="true" tabindex="-1"></a>radioactive_cols <span class="ot">&lt;-</span> <span class="cf">function</span>(...) {</span>
<span id="annotated-cell-5-7"><a href="#annotated-cell-5-7" aria-hidden="true" tabindex="-1"></a>        radioactive_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">`</span><span class="at">red</span><span class="st">`</span>               <span class="ot">=</span> <span class="st">"#BC1A10"</span>, </span>
<span id="annotated-cell-5-8"><a href="#annotated-cell-5-8" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">orange</span><span class="st">`</span>            <span class="ot">=</span> <span class="st">"#FFC901"</span>, </span>
<span id="annotated-cell-5-9"><a href="#annotated-cell-5-9" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">gorse</span><span class="st">`</span>             <span class="ot">=</span> <span class="st">"#F7FF56"</span>, </span>
<span id="annotated-cell-5-10"><a href="#annotated-cell-5-10" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">charteuse</span><span class="st">`</span>         <span class="ot">=</span> <span class="st">"#94FC13"</span>, </span>
<span id="annotated-cell-5-11"><a href="#annotated-cell-5-11" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">turqoise</span><span class="st">`</span>          <span class="ot">=</span> <span class="st">"#4BE3AC"</span>, </span>
<span id="annotated-cell-5-12"><a href="#annotated-cell-5-12" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">caribbean green</span><span class="st">`</span>   <span class="ot">=</span> <span class="st">"#00BDAA"</span>, </span>
<span id="annotated-cell-5-13"><a href="#annotated-cell-5-13" aria-hidden="true" tabindex="-1"></a>                                <span class="st">`</span><span class="at">electric violet</span><span class="st">`</span>   <span class="ot">=</span> <span class="st">"#951DED"</span>)</span>
<span id="annotated-cell-5-14"><a href="#annotated-cell-5-14" aria-hidden="true" tabindex="-1"></a>        cols <span class="ot">&lt;-</span> <span class="fu">c</span>(...)</span>
<span id="annotated-cell-5-15"><a href="#annotated-cell-5-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-16"><a href="#annotated-cell-5-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(<span class="fu">is.null</span>(cols)) </span>
<span id="annotated-cell-5-17"><a href="#annotated-cell-5-17" aria-hidden="true" tabindex="-1"></a>                <span class="fu">return</span>(radioactive_colors)</span>
<span id="annotated-cell-5-18"><a href="#annotated-cell-5-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-19"><a href="#annotated-cell-5-19" aria-hidden="true" tabindex="-1"></a>        radioactive_colors[cols]</span>
<span id="annotated-cell-5-20"><a href="#annotated-cell-5-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="annotated-cell-5-21"><a href="#annotated-cell-5-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-22"><a href="#annotated-cell-5-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-23"><a href="#annotated-cell-5-23" aria-hidden="true" tabindex="-1"></a><span class="co">#' Return function to interpolate a radioactive color palette</span></span>
<span id="annotated-cell-5-24"><a href="#annotated-cell-5-24" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-25"><a href="#annotated-cell-5-25" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param palette Character name of palette in radioactive_colors</span></span>
<span id="annotated-cell-5-26"><a href="#annotated-cell-5-26" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param reverse Boolean indicating whether the palette should be reversed</span></span>
<span id="annotated-cell-5-27"><a href="#annotated-cell-5-27" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param ... Additional arguments to pass to colorRampPalette()</span></span>
<span id="annotated-cell-5-28"><a href="#annotated-cell-5-28" aria-hidden="true" tabindex="-1"></a><span class="co">#' @return A function for color interpolation</span></span>
<span id="annotated-cell-5-29"><a href="#annotated-cell-5-29" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-30"><a href="#annotated-cell-5-30" aria-hidden="true" tabindex="-1"></a>radioactive_pal <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">palette =</span> <span class="st">"main"</span>, <span class="at">reverse =</span> <span class="cn">FALSE</span>, ...) {</span>
<span id="annotated-cell-5-31"><a href="#annotated-cell-5-31" aria-hidden="true" tabindex="-1"></a>        </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1">1</button><span id="annotated-cell-5-32" class="code-annotation-target"><a href="#annotated-cell-5-32" aria-hidden="true" tabindex="-1"></a>        radioactive_palettes <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="annotated-cell-5-33"><a href="#annotated-cell-5-33" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">main</span><span class="st">`</span>  <span class="ot">=</span> <span class="fu">radioactive_cols</span>(<span class="st">"gorse"</span>, <span class="st">"turqoise"</span>, <span class="st">"electric violet"</span>),</span>
<span id="annotated-cell-5-34"><a href="#annotated-cell-5-34" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">mixed</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">radioactive_cols</span>(<span class="st">"gorse"</span>, <span class="st">"charteuse"</span>, <span class="st">"turqoise"</span>,</span>
<span id="annotated-cell-5-35"><a href="#annotated-cell-5-35" aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"caribbean green"</span>, <span class="st">"electric violet"</span>),</span>
<span id="annotated-cell-5-36"><a href="#annotated-cell-5-36" aria-hidden="true" tabindex="-1"></a>                <span class="st">`</span><span class="at">hot</span><span class="st">`</span>   <span class="ot">=</span> <span class="fu">radioactive_cols</span>(<span class="st">"red"</span>, <span class="st">"orange"</span>)</span>
<span id="annotated-cell-5-37"><a href="#annotated-cell-5-37" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="annotated-cell-5-38"><a href="#annotated-cell-5-38" aria-hidden="true" tabindex="-1"></a>        pal <span class="ot">&lt;-</span> radioactive_palettes[[palette]]</span>
<span id="annotated-cell-5-39"><a href="#annotated-cell-5-39" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-40"><a href="#annotated-cell-5-40" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(reverse) pal <span class="ot">&lt;-</span> <span class="fu">rev</span>(pal)</span>
<span id="annotated-cell-5-41"><a href="#annotated-cell-5-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-42"><a href="#annotated-cell-5-42" aria-hidden="true" tabindex="-1"></a>        <span class="fu">colorRampPalette</span>(pal, ...)</span>
<span id="annotated-cell-5-43"><a href="#annotated-cell-5-43" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="annotated-cell-5-44"><a href="#annotated-cell-5-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-45"><a href="#annotated-cell-5-45" aria-hidden="true" tabindex="-1"></a><span class="co">#' Color scale constructor for radioactive colors</span></span>
<span id="annotated-cell-5-46"><a href="#annotated-cell-5-46" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-47"><a href="#annotated-cell-5-47" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param palette Character name of palette in radioactive_colors</span></span>
<span id="annotated-cell-5-48"><a href="#annotated-cell-5-48" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param discrete Boolean indicating whether color aesthetic is discrete or not</span></span>
<span id="annotated-cell-5-49"><a href="#annotated-cell-5-49" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param reverse Boolean indicating whether the palette should be reversed</span></span>
<span id="annotated-cell-5-50"><a href="#annotated-cell-5-50" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param ... Additional arguments passed to \code{discrete_scale()} or</span></span>
<span id="annotated-cell-5-51"><a href="#annotated-cell-5-51" aria-hidden="true" tabindex="-1"></a><span class="co">#'            \code{scale_color_gradientn()}, used respectively when discrete is</span></span>
<span id="annotated-cell-5-52"><a href="#annotated-cell-5-52" aria-hidden="true" tabindex="-1"></a><span class="co">#'            TRUE or FALSE</span></span>
<span id="annotated-cell-5-53"><a href="#annotated-cell-5-53" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-54"><a href="#annotated-cell-5-54" aria-hidden="true" tabindex="-1"></a>scale_color_radioactive <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">palette =</span> <span class="st">"main"</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>, <span class="at">reverse =</span> <span class="cn">FALSE</span>, ...) {</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="2">2</button><span id="annotated-cell-5-55" class="code-annotation-target"><a href="#annotated-cell-5-55" aria-hidden="true" tabindex="-1"></a>        pal <span class="ot">&lt;-</span> <span class="fu">radioactive_pal</span>(<span class="at">palette =</span> palette, <span class="at">reverse =</span> reverse)</span>
<span id="annotated-cell-5-56"><a href="#annotated-cell-5-56" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-57"><a href="#annotated-cell-5-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(discrete) {</span>
<span id="annotated-cell-5-58"><a href="#annotated-cell-5-58" aria-hidden="true" tabindex="-1"></a>                ggplot2<span class="sc">::</span><span class="fu">discrete_scale</span>(<span class="st">"color"</span>, <span class="fu">paste0</span>(<span class="st">"radioactive_"</span>, palette),  </span>
<span id="annotated-cell-5-59"><a href="#annotated-cell-5-59" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">palette =</span> pal,</span>
<span id="annotated-cell-5-60"><a href="#annotated-cell-5-60" aria-hidden="true" tabindex="-1"></a>                                        ...)</span>
<span id="annotated-cell-5-61"><a href="#annotated-cell-5-61" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="annotated-cell-5-62"><a href="#annotated-cell-5-62" aria-hidden="true" tabindex="-1"></a>                ggplot2<span class="sc">::</span><span class="fu">scale_color_gradientn</span>(<span class="at">colours =</span> <span class="fu">pal</span>(<span class="dv">256</span>),</span>
<span id="annotated-cell-5-63"><a href="#annotated-cell-5-63" aria-hidden="true" tabindex="-1"></a>                                               ...)</span>
<span id="annotated-cell-5-64"><a href="#annotated-cell-5-64" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="annotated-cell-5-65"><a href="#annotated-cell-5-65" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="annotated-cell-5-66"><a href="#annotated-cell-5-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-5-67"><a href="#annotated-cell-5-67" aria-hidden="true" tabindex="-1"></a><span class="co">#' Fill scale constructor for radioactive colors</span></span>
<span id="annotated-cell-5-68"><a href="#annotated-cell-5-68" aria-hidden="true" tabindex="-1"></a><span class="co">#'</span></span>
<span id="annotated-cell-5-69"><a href="#annotated-cell-5-69" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param palette Character name of palette in radioactive_colors</span></span>
<span id="annotated-cell-5-70"><a href="#annotated-cell-5-70" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param discrete Boolean indicating whether color aesthetic is discrete or not</span></span>
<span id="annotated-cell-5-71"><a href="#annotated-cell-5-71" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param reverse Boolean indicating whether the palette should be reversed</span></span>
<span id="annotated-cell-5-72"><a href="#annotated-cell-5-72" aria-hidden="true" tabindex="-1"></a><span class="co">#' @param ... Additional arguments passed to discrete_scale() or</span></span>
<span id="annotated-cell-5-73"><a href="#annotated-cell-5-73" aria-hidden="true" tabindex="-1"></a><span class="co">#'   scale_fill_gradientn(), used respectively when discrete is TRUE or FALSE</span></span>
<span id="annotated-cell-5-74"><a href="#annotated-cell-5-74" aria-hidden="true" tabindex="-1"></a><span class="co">#'   </span></span>
<span id="annotated-cell-5-75"><a href="#annotated-cell-5-75" aria-hidden="true" tabindex="-1"></a>scale_fill_radioactive <span class="ot">&lt;-</span> <span class="cf">function</span>(<span class="at">palette =</span> <span class="st">"main"</span>, <span class="at">discrete =</span> <span class="cn">TRUE</span>, <span class="at">reverse =</span> <span class="cn">FALSE</span>, ...) {</span>
<span id="annotated-cell-5-76"><a href="#annotated-cell-5-76" aria-hidden="true" tabindex="-1"></a>        pal <span class="ot">&lt;-</span> <span class="fu">radioactive_pal</span>(<span class="at">palette =</span> palette, <span class="at">reverse =</span> reverse)</span>
<span id="annotated-cell-5-77"><a href="#annotated-cell-5-77" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="annotated-cell-5-78"><a href="#annotated-cell-5-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span>(discrete) {</span>
<span id="annotated-cell-5-79"><a href="#annotated-cell-5-79" aria-hidden="true" tabindex="-1"></a>                ggplot2<span class="sc">::</span><span class="fu">discrete_scale</span>(<span class="st">"fill"</span>, <span class="fu">paste0</span>(<span class="st">"radioactive_"</span>, palette), </span>
<span id="annotated-cell-5-80"><a href="#annotated-cell-5-80" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">palette =</span> pal, ...)</span>
<span id="annotated-cell-5-81"><a href="#annotated-cell-5-81" aria-hidden="true" tabindex="-1"></a>        } <span class="cf">else</span> {</span>
<span id="annotated-cell-5-82"><a href="#annotated-cell-5-82" aria-hidden="true" tabindex="-1"></a>                ggplot2<span class="sc">::</span><span class="fu">scale_fill_gradientn</span>(<span class="at">colours =</span> <span class="fu">pal</span>(<span class="dv">256</span>), ...)</span>
<span id="annotated-cell-5-83"><a href="#annotated-cell-5-83" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="annotated-cell-5-84"><a href="#annotated-cell-5-84" aria-hidden="true" tabindex="-1"></a>}</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="32,33,34,35,36,37" data-code-annotation="1">Define your palette with chosen colors.</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="55,59,62" data-code-annotation="2">Make sure a function input for the <code>palette</code> argument.</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="prepare-data" class="level2">
<h2 class="anchored" data-anchor-id="prepare-data">Prepare Data</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>explosions_depth <span class="ot">&lt;-</span> nuclear_explosions <span class="sc">%&gt;%</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">type =</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"SHAFT|MINE|U[G|W]|TUNNEL|GALLERY"</span>, type), <span class="st">"U"</span>, <span class="st">"A"</span>), </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">purpose =</span> <span class="fu">fct_lump_min</span>(purpose, <span class="at">min =</span> <span class="dv">100</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">select</span>(year, country, type) <span class="sc">%&gt;%</span> </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">count</span>(year, country, type) <span class="sc">%&gt;%</span> </span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(<span class="at">n =</span> <span class="fu">ifelse</span>(type <span class="sc">==</span> <span class="st">"U"</span>, <span class="sc">-</span>n, n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="first-barplot" class="level2">
<h2 class="anchored" data-anchor-id="first-barplot">First Barplot</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-7"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-7-1"><a href="#annotated-cell-7-1" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span> </span>
<span id="annotated-cell-7-2"><a href="#annotated-cell-7-2" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_bar</span>(<span class="at">data =</span> explosions_depth, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n, <span class="at">col =</span> country), </span>
<span id="annotated-cell-7-3"><a href="#annotated-cell-7-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="cn">NA</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-7" data-target-annotation="3">3</button><span id="annotated-cell-7-4" class="code-annotation-target"><a href="#annotated-cell-7-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_color_radioactive</span>() <span class="sc">+</span></span>
<span id="annotated-cell-7-5"><a href="#annotated-cell-7-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_x_continuous</span>(<span class="st">""</span>, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1945</span>, <span class="dv">2000</span>, <span class="dv">1</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="fl">0.03</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="annotated-cell-7-6"><a href="#annotated-cell-7-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> \(x) <span class="fu">abs</span>(x)) <span class="sc">+</span></span>
<span id="annotated-cell-7-7"><a href="#annotated-cell-7-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">ncol =</span> <span class="dv">2</span>))</span>
<span id="annotated-cell-7-8"><a href="#annotated-cell-7-8" aria-hidden="true" tabindex="-1"></a>p</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-7" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="4" data-code-annotation="3">Use your new scale function as per usual.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="2019034-nuclear-bomb_files/figure-html/barplot-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="2019034-nuclear-bomb_files/figure-html/barplot-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="decorations-annotations" class="level2">
<h2 class="anchored" data-anchor-id="decorations-annotations">Decorations &amp; Annotations</h2>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-8"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="4">4</button><span id="annotated-cell-8-1" class="code-annotation-target"><a href="#annotated-cell-8-1" aria-hidden="true" tabindex="-1"></a>sysfonts<span class="sc">::</span><span class="fu">font_add</span>(<span class="st">"Baskerville"</span>, <span class="at">regular =</span> <span class="st">"../../../static/font/Baskervville-Regular.ttf"</span>)</span>
<span id="annotated-cell-8-2"><a href="#annotated-cell-8-2" aria-hidden="true" tabindex="-1"></a>showtext<span class="sc">::</span><span class="fu">showtext_auto</span>()</span>
<span id="annotated-cell-8-3"><a href="#annotated-cell-8-3" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="5">5</button><span id="annotated-cell-8-4" class="code-annotation-target"><a href="#annotated-cell-8-4" aria-hidden="true" tabindex="-1"></a>annotations <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="annotated-cell-8-5"><a href="#annotated-cell-8-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">x1 =</span> <span class="fu">c</span>(<span class="dv">1963</span>, <span class="dv">1996</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">y1 =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">0</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="annotated-cell-8-6"><a href="#annotated-cell-8-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">x2 =</span> <span class="fu">c</span>(<span class="dv">1963</span>, <span class="dv">1996</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">y2 =</span> <span class="fu">c</span>(<span class="dv">110</span>, <span class="dv">105</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="annotated-cell-8-7"><a href="#annotated-cell-8-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">x3 =</span> <span class="fu">c</span>(<span class="dv">1964</span>, <span class="fl">1994.5</span>, <span class="cn">NA</span>, <span class="cn">NA</span>), <span class="at">y3 =</span> <span class="fu">c</span>(<span class="dv">110</span>, <span class="dv">105</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="annotated-cell-8-8"><a href="#annotated-cell-8-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">xtext =</span> <span class="fu">c</span>(<span class="dv">1968</span>, <span class="dv">1989</span>, <span class="dv">1946</span>, <span class="dv">1946</span>), <span class="at">ytext =</span> <span class="fu">c</span>(<span class="dv">104</span>, <span class="dv">102</span>, <span class="dv">115</span>, <span class="sc">-</span><span class="dv">55</span>),</span>
<span id="annotated-cell-8-9"><a href="#annotated-cell-8-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">text =</span> <span class="fu">c</span>(<span class="st">"**Partial Test Ban Treaty**&lt;br&gt;prohibiting tests in atmosphere,</span></span>
<span id="annotated-cell-8-10"><a href="#annotated-cell-8-10" aria-hidden="true" tabindex="-1"></a><span class="st">                               &lt;br&gt;outer space, and underwater"</span>,</span>
<span id="annotated-cell-8-11"><a href="#annotated-cell-8-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"**Comprehensive Test Ban Treaty**&lt;br&gt;prohibiting all tests"</span>,</span>
<span id="annotated-cell-8-12"><a href="#annotated-cell-8-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"**Atmopsheric**"</span>, <span class="st">"**Underground**"</span>)</span>
<span id="annotated-cell-8-13"><a href="#annotated-cell-8-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-8-14"><a href="#annotated-cell-8-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-8-15"><a href="#annotated-cell-8-15" aria-hidden="true" tabindex="-1"></a>p <span class="sc">+</span> </span>
<span id="annotated-cell-8-16"><a href="#annotated-cell-8-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_segment</span>(<span class="at">data =</span> annotations, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">y =</span> y1, <span class="at">xend =</span> x2, <span class="at">yend =</span> y2),</span>
<span id="annotated-cell-8-17"><a href="#annotated-cell-8-17" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-8-18"><a href="#annotated-cell-8-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">geom_segment</span>(<span class="at">data =</span> annotations, <span class="fu">aes</span>(<span class="at">x =</span> x1, <span class="at">xend =</span> x3, <span class="at">y =</span> y3, <span class="at">yend =</span> y3),</span>
<span id="annotated-cell-8-19"><a href="#annotated-cell-8-19" aria-hidden="true" tabindex="-1"></a>                     <span class="at">col =</span> <span class="st">"white"</span>) <span class="sc">+</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="6">6</button><span id="annotated-cell-8-20" class="code-annotation-target"><a href="#annotated-cell-8-20" aria-hidden="true" tabindex="-1"></a>        ggtext<span class="sc">::</span><span class="fu">geom_richtext</span>(</span>
<span id="annotated-cell-8-21"><a href="#annotated-cell-8-21" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> annotations,</span>
<span id="annotated-cell-8-22"><a href="#annotated-cell-8-22" aria-hidden="true" tabindex="-1"></a>                <span class="fu">aes</span>(<span class="at">x =</span> xtext, <span class="at">y =</span> ytext, <span class="at">label =</span> text),</span>
<span id="annotated-cell-8-23"><a href="#annotated-cell-8-23" aria-hidden="true" tabindex="-1"></a>                <span class="at">size =</span> <span class="fl">5.5</span>, <span class="at">fill =</span> <span class="cn">NA</span>, <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">label.color =</span> <span class="cn">NA</span>,</span>
<span id="annotated-cell-8-24"><a href="#annotated-cell-8-24" aria-hidden="true" tabindex="-1"></a>                      <span class="at">family =</span> <span class="st">"Baskerville"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-8-25"><a href="#annotated-cell-8-25" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">16</span>, </span>
<span id="annotated-cell-8-26"><a href="#annotated-cell-8-26" aria-hidden="true" tabindex="-1"></a>                      <span class="at">base_family =</span> <span class="st">"Baskerville"</span>) <span class="sc">+</span></span>
<span id="annotated-cell-8-27"><a href="#annotated-cell-8-27" aria-hidden="true" tabindex="-1"></a>                <span class="fu">labs</span>(</span>
<span id="annotated-cell-8-28"><a href="#annotated-cell-8-28" aria-hidden="true" tabindex="-1"></a>                        <span class="at">x =</span> <span class="st">""</span>, </span>
<span id="annotated-cell-8-29"><a href="#annotated-cell-8-29" aria-hidden="true" tabindex="-1"></a>                        <span class="at">y =</span> <span class="st">""</span>, </span>
<span id="annotated-cell-8-30"><a href="#annotated-cell-8-30" aria-hidden="true" tabindex="-1"></a>                        <span class="at">title =</span> <span class="fu">str_to_title</span>(<span class="st">"the number of nuclear explosions"</span>),</span>
<span id="annotated-cell-8-31"><a href="#annotated-cell-8-31" aria-hidden="true" tabindex="-1"></a>                        <span class="at">subtitle =</span> <span class="fu">str_wrap</span>(<span class="st">"A re-design for statistical chart in SIPRI report (2000) tallying </span></span>
<span id="annotated-cell-8-32"><a href="#annotated-cell-8-32" aria-hidden="true" tabindex="-1"></a><span class="st">                                 the number of nuclear explosions conducted by countries </span></span>
<span id="annotated-cell-8-33"><a href="#annotated-cell-8-33" aria-hidden="true" tabindex="-1"></a><span class="st">                                 in the air and under ground."</span>, <span class="dv">85</span>), </span>
<span id="annotated-cell-8-34"><a href="#annotated-cell-8-34" aria-hidden="true" tabindex="-1"></a>                        <span class="at">caption =</span> <span class="st">"data: Stockholm International Peace Research Institute|graph: @chucc900"</span></span>
<span id="annotated-cell-8-35"><a href="#annotated-cell-8-35" aria-hidden="true" tabindex="-1"></a>                ) <span class="sc">+</span></span>
<span id="annotated-cell-8-36"><a href="#annotated-cell-8-36" aria-hidden="true" tabindex="-1"></a>        <span class="fu">theme</span>(</span>
<span id="annotated-cell-8-37"><a href="#annotated-cell-8-37" aria-hidden="true" tabindex="-1"></a>                <span class="at">plot.background =</span> <span class="fu">element_rect</span>(<span class="st">"#000000"</span>),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="7">7</button><span id="annotated-cell-8-38" class="code-annotation-target"><a href="#annotated-cell-8-38" aria-hidden="true" tabindex="-1"></a>                <span class="at">panel.background =</span> <span class="fu">element_rect</span>(<span class="st">"#000000"</span>),</span>
<span id="annotated-cell-8-39"><a href="#annotated-cell-8-39" aria-hidden="true" tabindex="-1"></a>                <span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>(),</span>
<span id="annotated-cell-8-40"><a href="#annotated-cell-8-40" aria-hidden="true" tabindex="-1"></a>                <span class="at">panel.grid.major.x =</span> <span class="fu">element_blank</span>(),</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-8" data-target-annotation="8">8</button><span id="annotated-cell-8-41" class="code-annotation-target"><a href="#annotated-cell-8-41" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.background =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#000"</span>),</span>
<span id="annotated-cell-8-42"><a href="#annotated-cell-8-42" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="fl">0.68</span>),</span>
<span id="annotated-cell-8-43"><a href="#annotated-cell-8-43" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">margin =</span> <span class="fu">margin</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="sc">-</span><span class="dv">1</span>, <span class="dv">0</span>)),</span>
<span id="annotated-cell-8-44"><a href="#annotated-cell-8-44" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.title =</span> <span class="fu">element_blank</span>(),</span>
<span id="annotated-cell-8-45"><a href="#annotated-cell-8-45" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.key =</span> <span class="fu">element_rect</span>(<span class="at">fill =</span> <span class="st">"#000000"</span>),</span>
<span id="annotated-cell-8-46"><a href="#annotated-cell-8-46" aria-hidden="true" tabindex="-1"></a>                <span class="at">legend.key.size =</span> <span class="fu">unit</span>(.<span class="dv">8</span>, <span class="st">"cm"</span>),</span>
<span id="annotated-cell-8-47"><a href="#annotated-cell-8-47" aria-hidden="true" tabindex="-1"></a>                <span class="at">text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>), </span>
<span id="annotated-cell-8-48"><a href="#annotated-cell-8-48" aria-hidden="true" tabindex="-1"></a>                <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="annotated-cell-8-49"><a href="#annotated-cell-8-49" aria-hidden="true" tabindex="-1"></a>                <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">90</span>), </span>
<span id="annotated-cell-8-50"><a href="#annotated-cell-8-50" aria-hidden="true" tabindex="-1"></a>                <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"white"</span>),</span>
<span id="annotated-cell-8-51"><a href="#annotated-cell-8-51" aria-hidden="true" tabindex="-1"></a>                <span class="at">plot.margin =</span> <span class="fu">margin</span>(<span class="dv">40</span>, <span class="dv">40</span>, <span class="dv">10</span>, <span class="dv">10</span>),</span>
<span id="annotated-cell-8-52"><a href="#annotated-cell-8-52" aria-hidden="true" tabindex="-1"></a>                <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">30</span>, <span class="at">color =</span> <span class="fu">radioactive_cols</span>()[<span class="st">"gorse"</span>], </span>
<span id="annotated-cell-8-53"><a href="#annotated-cell-8-53" aria-hidden="true" tabindex="-1"></a>                                          <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="annotated-cell-8-54"><a href="#annotated-cell-8-54" aria-hidden="true" tabindex="-1"></a>                <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>)</span>
<span id="annotated-cell-8-55"><a href="#annotated-cell-8-55" aria-hidden="true" tabindex="-1"></a>        )</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-8" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="1,2" data-code-annotation="4">Import your local font before telling ggplot2 to call it for text.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="4,13" data-code-annotation="5">Here we hardcode our annotations in the form of tabular data.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="20,21,22,23,24" data-code-annotation="6"><code>ggtext::geom_richtext()</code> accepts markdown text format.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="38,39,40" data-code-annotation="7"><code>panel.*</code> arguments control the elements inside the axis area.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="41,42,43,44,45,46" data-code-annotation="8"><code>legend.*</code> arguments control the legend elements.</span>
</dd>
</dl>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><a href="2019034-nuclear-bomb_files/figure-html/barplot%20annotations-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="2019034-nuclear-bomb_files/figure-html/barplot%20annotations-1.png" class="img-fluid figure-img" width="1152"></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>